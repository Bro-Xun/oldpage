<!doctype html>
<html>
<head>
<style>
		body,td,th{
    		background-color: black;
    		color: white;			
		}
	::selection { background:pink;cursor:url("img/mouse.ico"),auto; color:blue; }
	::-moz-selection { background:pink;cursor:url("img/mouse.ico"),auto; color:blue; }
	::-webkit-selection { background:pink;cursor:url("img/mouse.ico"),auto; color:blue;}
	</style>
<meta charset="utf-8">
<title>我的日记</title>
</head>

<body onLoad="readt()">
	<div align="center">
		<h2>Hydroxyl ion's Diary</h2>
		<hr color="#aaaaaa">
<p><table width="75%" border="1">
  <tbody>
    <tr>
      <th scope="col" colspan="6" id="time">&nbsp;</th>
    </tr>
    <tr>
      <td width="75px" align="center">创建时间</td>
      <td id="create_time" align="center">&nbsp;</td>
      <td width="75px" align="center">编辑时长</td>
      <td id="time_use" align="center">&nbsp;</td>
      <td width="75px" align="center">mood</td>
      <td id="mood" align="center">&nbsp;</td>
    </tr>
    <tr>
      <td colspan="6" id="title" align="center"><b>&nbsp;</b></td>
    </tr>
    <tr>
      <td align="center" width="75px">内容</td>
      <td colspan="5" id="content"></td>
    </tr>
  </tbody>
</table>
		<table width="80%" border="0">
  <tbody>
    <tr align="center">
      <td id="all1"></td>
    </tr>
  </tbody>
</table>

</p><br>
	选择第<input type="number" value="" id="num" size="10px">项 <input type="button" value=" 确认 " onClick="pushc()" class="btn"><br><br>
	<input type="button" value=" 返回 " onClick="window.location.href='https://hydroxyl-ion.rthe.xyz/'" class="btn"></div>
	<script>
		var allt=[];
		var title="";
		var date="";
		var loc=0;
		function readt(){
			var xhr=new XMLHttpRequest;
			xhr.open("GET","data.json",false);
			xhr.send();
			allt=JSON.parse(xhr.response);
			var now={};
			for(var i=0;i<allt.length;i++){
				now=allt.at(i);
				title=now.title;
				date=allt.at(i).Date;
				document.getElementById("all1").innerHTML=document.getElementById("all1").innerHTML+String(i+1)+". "+date+" <strong>"+title+"</strong><br>"
			}
		}
		function pushc(){
			loc=Number(document.getElementById("num").value)-1;
			if(loc>allt.length){
				alert("输入的值过大，最大应为 "+allt.length);
			}
			else if(loc%1!=0){
				alert("不应输入小数");
			}
			else if(loc<0){
				alert("应输入正整数");
			}
			else{
				var all=allt.at(loc);
				time = new Date(all.time_start);
				if (time.getHours()<10){
					cr_t_h  = "0"+String(time.getHours());
				}
				else{
					cr_t_h = String(time.getHours());
				}
				if (time.getMinutes()<10){
					cr_t_m  = "0"+String(time.getMinutes());
				}
				else{
					cr_t_m = String(time.getMinutes());
				}
				if (time.getSeconds()<10){
					cr_t_s  = "0"+String(time.getSeconds());
				}
				else{
					cr_t_s = String(time.getSeconds());
				}
				document.getElementById("time").innerHTML=all.Date+"  "+all.week_name;
				document.getElementById("create_time").innerHTML=cr_t_h+":"+cr_t_m+":"+cr_t_s;
				document.getElementById("time_use").innerHTML=Math.round(100*(all.timestamp-all.time_start)/60000)/100+"分钟";
				document.getElementById("mood").innerHTML=all.mood;
				document.getElementById("title").innerHTML="<b>"+all.title+"</b>";
				document.getElementById("content").innerHTML=all.content;
			}
		}
	</script>
</body>
</html>
